---
name: iterate-skills
description: 迭代优化当前仓库的所有 skill 文件，重点提升执行准确性与 token 使用效率。关键词：skill, 优化, 迭代, 准确性, token, 精简, 提示词, workflow
---

## 功能说明

自动检查 `.claude/skills/**/SKILL.md`，识别可优化点并执行最小改动优化，重点关注：
- **准确性**：步骤可执行、顺序正确、约束明确、避免歧义
- **token 效率**：减少重复、压缩冗余描述、保留必要上下文

## 适用场景

- 新增了多个 skill，需要统一质量
- 发现 skill 过长、重复、执行不稳定
- 希望在不改变功能的前提下，降低推理和输出成本

## 执行步骤

1. **发现与收集**
   - 扫描 `.claude/skills/**/SKILL.md`
   - 读取每个 skill 的 frontmatter 与正文结构

2. **质量检查（逐文件）**
   - frontmatter 完整：`name`、`description` 是否存在且语义清晰
   - 步骤可执行：是否包含可落地动作，是否缺关键前置条件
   - 约束完整：是否明确“何时提问/何时直接执行”
   - 输出规范：是否要求简洁结果与错误摘要
   - 冗余度：是否存在重复段落、重复提问、长篇泛化描述

3. **token 优化策略**
   - 合并同义重复句，删除装饰性文字
   - 保留“必须条件”，删除“可推断常识”
   - 将长段解释改为短规则列表（优先 4-8 条）
   - 示例只保留 1 个高价值样例，避免多段冗长样例

4. **准确性增强策略**
   - 为含副作用动作增加“先确认”或“失败回退”规则
   - 明确默认值（如默认分支、默认范围、默认执行模式）
   - 避免模糊词（如“适当”“尽量”），改为可判定条件

5. **输出改进报告并执行变更**
   - 先输出“优化计划”（文件 + 拟修改点）
   - 批量修改并保持最小 diff
   - 输出结果：
     - 已优化文件列表
     - 每个文件的关键改进点（1-3 条）
     - 若有未改项，说明原因

## 评分标准（用于自检）

每个 skill 按 0-2 分评分，总分 10：
- 结构完整（frontmatter + 步骤 + 输出）
- 执行可落地（动作明确、顺序正确）
- 风险可控（有确认点/回退策略）
- token 经济（无明显重复与冗长）
- 默认行为清晰（可在缺省输入下稳定执行）

低于 8 分应优先优化。

## 注意事项

- 不改变 skill 原始目标与边界，只优化表达和执行稳定性
- 不引入与该 skill 无关的新能力
- 修改应保持风格一致，避免大规模重写
- 若用户要求“仅建议不改文件”，则只输出优化建议清单
