---
name: generate-character-images
description: 根据人设调用生图 API 生成角色设定图，输出可用于人物栏的图片资源。关键词：人物, 人设, 生图, 角色设定图, portrait
---

## 功能说明

根据角色文本设定（外观、服装、气质、年龄感等）生成人物设定图，并保存到 `docs/scenes/<script_name>/`。

人物设定图采用“行业常见角色设定单”标准：
- 主视图（Front）
- 侧视图（Side）
- 后视图（Back）
- 装饰细节（配饰/鞋履/道具局部）

## 执行步骤

1. 收集输入：
   - 剧本名（用于落盘目录）
   - 阶段1规划包中的人物设定（若已存在则直接复用）
   - 角色名、性别表现、年龄段、外观关键词、服装关键词、风格关键词
   - 图片比例（默认横向设定单）与数量（默认 1）

2. 生成提示词（允许长提示词，优先完整约束）：
   - 正向提示词：角色核心特征 + 服装材质 + 配色方案 + 三视图版式 + 细节特写要求 + 画风约束 + 线稿与上色质量要求
   - 反向提示词：低质量、模糊、水印、文本、畸形

3. 调用生图 API：
   - 使用仓库已有生图工具生成图片
   - 默认尺寸：`1536x1024`（横向设定单，容纳三视图与细节区）
   - 保存路径：`docs/scenes/<script_name>/char_ref_<character>_v1.png`

4. 结果检查：
   - 图片可打开、尺寸正确、命名可追踪
   - 输出给用户：路径、提示词摘要、可选迭代方向

## 默认值

- 默认风格：二次元视觉小说角色设定单风格
- 默认数量：1
- 默认尺寸：1536x1024
- 单角色默认先生成 1 张基准设定图，后续按需要增量生成

## 注意事项

- 本 skill 只负责角色设定图，不改剧本 JSON。
- 若用户未提供关键人设，先要求最少信息后再生成。
- 不生成暴力、违规内容。
